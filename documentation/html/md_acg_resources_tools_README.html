<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fanuc_m20ia_35m: acg_resources_tools</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fanuc_m20ia_35m
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">acg_resources_tools </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This package contains the trajectory analysis tool. This tool plots the planned and executed trajectories from a bag file, and calculates the Mean Squared Error (MSE) between them. The trajectories can be in joint space or in task space.</p>
<h1><a class="anchor" id="autotoc_md25"></a>
Installing the dependencies</h1>
<p>In order to install the needed dependencies run the following command inside the project's root folder:</p>
<div class="fragment"><div class="line">rosdep install --from-paths src --ignore-src -r -y</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md26"></a>
Usage</h1>
<p>To run the trajectory analyzer, use the following command:</p>
<div class="fragment"><div class="line">ros2 run acg_resources_tools trajectory_analyzer [-h] [--topic TOPIC] [--task-space] path_to_bagfile</div>
</div><!-- fragment --><p> where <code>path_to_bagfile</code> is the path of the bag file that contains the executed and planned trajectories, while the optional parameter <code>task-space</code> is used when you want to analyze a task space trajectory. The <code>topic</code> parameter is used to specify the topic contained in the bag file that contains the trajectory you want to plot, for example, the sine wave trajectory or the trajectory that takes the robot from the home position to the initial point of the sine wave. In case the <code>topic</code> parameter is not specified, the tool throws an error message and shows the list of topics contained in the bag file.</p>
<p>For the joint space the messages contained in the bag file, whatever the trajectory type as long as it is in the joint space, must be: <code>control_msgs/action/FollowJointTrajectory_FeedbackMessage</code>. Instead for the task space the messages contained in the bag file must be: <code>cartesian_control_msgs/action/FollowCartesianTrajectory_FeedbackMessage</code>.</p>
<p>Two examples of tool use are examined below, using two trajectories made by the Fanuc M-20iA/35M robot, going on to explore the cases of joint space and task space.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
Joint Space</h2>
<p>The tool generates two separate windows. In the first window, seven graphs are displayed, each plotting the positions (references and tracking) of the joints in sexagesimal degrees. For each graph, the Mean Squared Error (MSE) is also represented. In the second window, graphs similar to those in the first window are displayed, but for velocities instead of positions.</p>
<div class="fragment"><div class="line">ros2 run acg_resources_tools trajectory_analyzer ./src/unisa_acg_ros2/acg_resources_tools/resource/executed_joint_space_trajectories/executed_trajectory_2024-02-09_17-00-16/ --topic &#39;/fanuc_m20ia_cartesian_feedback&#39;</div>
</div><!-- fragment --><p>For this specific example, the possible topics are: ['/home_trajectory_feedback', '/point2point_feedback', '/fanuc_m20ia_cartesian_feedback']. The first topic, '/home_trajectory_feedback', contains the path that the robot follows to move from its current position to the home position. The second topic, '/point2point_feedback', represents the path from the home position to the first point of the sine wave. The third topic, '/fanuc_m20ia_cartesian_feedback', is solely the Cartesian path, which represents the sine wave.</p>
<h2><a class="anchor" id="autotoc_md28"></a>
Task Space</h2>
<p>The tool generates three separate windows. In the first window contains six graphs. Each graph plots the positions expressed as the x, y, and z components of the end effector, as well as the orientations as x, y, and z orientations of the end effector. Both reference and tracking are plotted on each graph, and the Mean Squared Error (MSE) is calculated for each. In the second window, graphs similar to those in the first window are displayed, but for velocities instead of positions. Finally, in the third window, the three-dimensional trajectory is visualized.</p>
<div class="fragment"><div class="line">ros2 run acg_resources_tools trajectory_analyzer --task-space ./src/unisa_acg_ros2/acg_resources_tools/resource/executed_task_space_trajectories/executed_trajectory_2024-02-13_16-40-29  --topic &#39;/fanuc_m20ia_cartesian_feedback&#39;</div>
</div><!-- fragment --><p>For this specific example, the possible topics are: ['/home_trajectory_feedback', '/point2point_feedback', '/fanuc_m20ia_cartesian_feedback']. The first topic, '/home_trajectory_feedback', contains the path that the robot follows to move from its current position to the home position. The second topic, '/point2point_feedback', represents the path from the home position to the first point of the sine wave. The third topic, '/fanuc_m20ia_cartesian_feedback', is solely the Cartesian path, which represents the sine wave.</p>
<h1><a class="anchor" id="autotoc_md29"></a>
Sample trajectories</h1>
<p>In the <code>resource</code> folder there are two folders <code>executed_joint_space_trajectories</code> and <code>executed_task_space_trajectories</code> in which sample trajectories can be found for analysis. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
